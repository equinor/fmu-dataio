<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Getting started &mdash; fmu.dataio 0.1.dev1+g6ab1f02 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css" />
      <link rel="stylesheet" type="text/css" href="_static/autodoc_pydantic.css" />
      <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
        <script>let toggleHintShow = 'Expand';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="_static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Examples" href="examples.html" />
    <link rel="prev" title="Overview" href="overview.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #C0C0C0" >

          
          
          <a href="index.html" class="icon icon-home">
            fmu.dataio
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">About</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Guide and Reference</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Getting started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#global-variables-yml-masterdata">global_variables.yml | <strong>masterdata</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="#global-variables-yml-access">global_variables.yml | <strong>access</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="#global-variables-yml-stratigraphy">global_variables.yml | <strong>stratigraphy</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="#global-variables-yml-model">global_variables.yml | <strong>model</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="#workflow-for-creating-case-metadata">Workflow for creating case metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="#include-a-data-export-job">Include a data export job</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#what-about-sumo">What about Sumo?</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="apiref/modules.html">API reference for fmu.dataio</a></li>
<li class="toctree-l1"><a class="reference internal" href="datamodel.html">The FMU results data model</a></li>
<li class="toctree-l1"><a class="reference internal" href="datastructure.html">Meta export datastructure</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #C0C0C0" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">fmu.dataio</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Getting started</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/preparations.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="getting-started">
<h1>Getting started<a class="headerlink" href="#getting-started" title="Permalink to this heading">ÔÉÅ</a></h1>
<p>In order to start using fmu-dataio and produce rich metadata for FMU output, some
preparations are necessary to your workflow. Expected time consumption is less than an hour.</p>
<p>You will do the following:</p>
<blockquote>
<div><ul class="simple">
<li><p>Find and enter some key model metadata into <code class="docutils literal notranslate"><span class="pre">global_variables.yml</span></code>, including references to Equinor masterdata.</p></li>
<li><p>Include an ERT workflow for generating case metadata</p></li>
<li><p>Include one script for data export</p></li>
</ul>
</div></blockquote>
<p>You may also find it helpful to look at the Drogon tutorial project for this. This is
in the category ‚Äúreally easy when you know how to do it‚Äù so don‚Äôt hesitate to ask for help!</p>
<section id="global-variables-yml-masterdata">
<h2>global_variables.yml | <strong>masterdata</strong><a class="headerlink" href="#global-variables-yml-masterdata" title="Permalink to this heading">ÔÉÅ</a></h2>
<p>References to the Equinor masterdata are essential context for enabling other systems to
use FMU results.</p>
<p>In <code class="docutils literal notranslate"><span class="pre">fmuconfig/input/</span></code>, create <code class="docutils literal notranslate"><span class="pre">_masterdata.yml</span></code>. The content of this file shall be
references to Equinor master data. We get our master data from SMDA, so you need to do some
lookups there to find your references.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Master data are ‚Äúdata about the business entities that provide context for business
transactions‚Äù (Wikipedia). In other words: <em>Definitions</em> of things that we refer to
across processes and entities. E.g. if two software, in two parts of the company, are
referring to the same thing, we need to agree on definitions of that specific thing
and we need to record those definitions in a way that makes us certain that we are, in
fact, referring to the same thing. An example is the country of Norway. Simply saying
‚ÄúNorway‚Äù is not enough. We can also refer to Norway as ‚ÄúNorge‚Äù, ‚ÄúNoreg‚Äù, ‚ÄúNorga‚Äù,
‚ÄúVuodna‚Äù or ‚ÄúN√∂√∂rje‚Äù. So, we define a universally unique identifier for the entity of
Norway, and we refer to this instead. And all those various names are <em>properties</em> on
this commonly defined entity. These definitions, we store as <em>master data</em> because no
single applications shall own this definition.</p>
</div>
<p>This is an example of <code class="docutils literal notranslate"><span class="pre">_masterdata.yml</span></code> from Drogon. Adjust to your needs:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Note! Drogon is synthetic, so UUID&#39;s below are examples.</span>

<span class="nt">smda</span><span class="p">:</span>
<span class="w">  </span><span class="nt">country</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">identifier</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Westeros</span>
<span class="w">      </span><span class="nt">uuid</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">00000000-0000-0000-0000-000000000000</span>
<span class="w">  </span><span class="nt">discovery</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">short_identifier</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DROGON</span>
<span class="w">      </span><span class="nt">uuid</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">00000000-0000-0000-0000-000000000000</span>
<span class="w">  </span><span class="nt">field</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">identifier</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DROGON</span>
<span class="w">      </span><span class="nt">uuid</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">00000000-0000-0000-0000-000000000000</span>
<span class="w">  </span><span class="nt">coordinate_system</span><span class="p">:</span>
<span class="w">    </span><span class="nt">identifier</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ST_WGS84_UTM37N_P12345</span>
<span class="w">    </span><span class="nt">uuid</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">00000000-0000-0000-0000-000000000000</span>
<span class="w">  </span><span class="nt">stratigraphic_column</span><span class="p">:</span>
<span class="w">    </span><span class="nt">identifier</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DROGON_2008</span>
<span class="w">    </span><span class="nt">uuid</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">00000000-0000-0000-0000-000000000000</span>
</pre></div>
</div>
<p>Note that <code class="docutils literal notranslate"><span class="pre">country</span></code>, <code class="docutils literal notranslate"><span class="pre">discovery</span></code> and <code class="docutils literal notranslate"><span class="pre">field</span></code> are lists (can have more than one),
while <code class="docutils literal notranslate"><span class="pre">coordinate_system</span></code> and <code class="docutils literal notranslate"><span class="pre">stratigraphic_column</span></code> are not.</p>
<p>To find the information for your model, use <a class="reference external" href="https://opus.smda.equinor.com/smda_viewer/">SMDA Viewer</a>.
You will see a number of topics, and below each topic you will see several tiles.
(Direct links to the tiles you need will be provided further down, but clicking around a
bit in SMDA is encouraged to get a feel for what our master data looks like.)</p>
<p>Navigate to the <a class="reference external" href="https://opus.smda.equinor.com/smda_viewer/fields">Fields</a> section. Use
the filters to focus the list of fields, until you are able to find yours. In the list
of fields, highlight the line corresponding to your field (or fields if your model covers
more than one field).</p>
<p>Click the FMU-logo in the top right menu to open the FMU Metadata generation dialogue.</p>
<p>Review the settings and make necessary changes. You can remove erroneous data, empty
discoveries, etc. Choose the appropriate Stratigraphic Column and
Coordinate Reference System (use same as in RMS) from the drop-down menus.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To find the coordinate system used in RMS: In RMS, select <code class="docutils literal notranslate"><span class="pre">tools</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">Coordinate</span> <span class="pre">system</span></code>.</p>
</div>
<p>Copy the generated YAML content into your <cite>_masterdata.yml</cite></p>
</section>
<section id="global-variables-yml-access">
<h2>global_variables.yml | <strong>access</strong><a class="headerlink" href="#global-variables-yml-access" title="Permalink to this heading">ÔÉÅ</a></h2>
<p>Next, create <code class="docutils literal notranslate"><span class="pre">_access.yml</span></code>. In this file, you will enter some information related
to how FMU results from your workflow are to be governed when it comes to access rights.</p>
<p>Example from Drogon:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">asset</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Drogon</span>
<span class="nt">ssdl</span><span class="p">:</span>
<span class="w">  </span><span class="nt">access_level</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">internal</span>
<span class="w">  </span><span class="nt">rep_include</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</pre></div>
</div>
<p>Under <code class="docutils literal notranslate"><span class="pre">asset.name</span></code> you will put the name of your asset. If you plan to upload data to
Sumo, you will be told by the Sumo team what asset should be.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Currently, the ‚Äúasset‚Äù concept is not covered by our masterdata. However, it is an important
piece of information that governs both ownership and access to data when stored in the
cloud. Sometimes, asset is identical to ‚Äúfield‚Äù but frequently it is not.</p>
</div>
<p>Under <code class="docutils literal notranslate"><span class="pre">ssdl</span></code>, you will enter some defaults regarding data sharing with the Subsurface Data Lake.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">ssdl.access_level</span></code> sets the (default) sensitivity of exported data. Valid entries
here are <code class="docutils literal notranslate"><span class="pre">internal</span></code> and <code class="docutils literal notranslate"><span class="pre">restricted</span></code>. The <code class="docutils literal notranslate"><span class="pre">ssdl.rep_include</span></code> sets the default flag
for signalling inclusion of exported data in the Reservoir Experience Platform. This is
a boolean, and valid entries are <code class="docutils literal notranslate"><span class="pre">True</span></code> and <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">access.ssdl.access_level</span></code> is currently also used for access handling in Sumo.</p>
</div>
<p>Note that these are defaults. You can override these settings at any point when exporting
data, and also note that no data will be lifted to the datalake without explicit action by you.</p>
</section>
<section id="global-variables-yml-stratigraphy">
<h2>global_variables.yml | <strong>stratigraphy</strong><a class="headerlink" href="#global-variables-yml-stratigraphy" title="Permalink to this heading">ÔÉÅ</a></h2>
<p>Finally, establish <code class="docutils literal notranslate"><span class="pre">_stratigraphy.yml</span></code>. This is a bit more heavy, and relates to the
<code class="docutils literal notranslate"><span class="pre">stratigraphic_column</span></code> referred to earlier. In short, when applicable, stratigraphic intervals
used in the model setup must be mapped to their respective references in the stratigraphic column.
The stratigraphic elements do not (currently) have unique ID‚Äôs. Instead, they rely on their
<em>name</em> as an identifier. For this reason, when exporting anything that needs to be linked
to the stratigraphic column, fmu-dataio will <em>change the name</em> to the official name as it
appears in the stratigraphic columns. The mechanism we use to do this, is a dictionary of all
horizons and zones, which we place into <code class="docutils literal notranslate"><span class="pre">_stratigraphy.yml</span></code>.</p>
<p>The <em>key</em> of each entry is identical to the name used in RMS. There are two required
values: <code class="docutils literal notranslate"><span class="pre">name</span></code> (the official name as listed in the stratigraphic column) and
<code class="docutils literal notranslate"><span class="pre">stratigraphic</span></code> (True if stratigraphic level is listed in the stratigraphic columns, False if not).</p>
<p>In example below, observe that ‚ÄúTopVolantis‚Äù is a home-made name for <code class="docutils literal notranslate"><span class="pre">VOLANTIS</span> <span class="pre">GP.</span> <span class="pre">Top</span></code>
and is in the stratigraphic column, while ‚ÄúSeabed‚Äù is not.</p>
<p>In addition, you may want to use some of the <em>optional</em> values:</p>
<blockquote>
<div><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">alias</span></code> is a list of known aliases for this stratigraphic entity.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stratigraphic_alias</span></code> is a list of valid <em>stratigraphic</em> aliases for this entry, e.g. when a</p></li>
<li><div class="line-block">
<div class="line">specific horizon is the top of both a formation and a group, or similar.</div>
</div>
</li>
</ul>
</div></blockquote>
<p>From the Drogon tutorial:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># HORIZONS</span>
<span class="nt">Seabed</span><span class="p">:</span>
<span class="w">    </span><span class="nt">stratigraphic</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span><span class="w"> </span><span class="c1"># This horizon is NOT in the stratigraphic column.</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Seabed</span>
<span class="nt">TopVolantis</span><span class="p">:</span>
<span class="w">    </span><span class="nt">stratigraphic</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span><span class="w"> </span><span class="c1"># This horizon is in the stratigraphic column...</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">VOLANTIS GP. Top</span><span class="w"> </span><span class="c1"># ...and this is what it is called.</span>
<span class="w">    </span><span class="nt">alias</span><span class="p">:</span><span class="w"> </span><span class="c1"># Optional</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TopVOLANTIS</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TOP_VOLANTIS</span>
<span class="nt">TopTherys</span><span class="p">:</span>
<span class="w">    </span><span class="nt">stratigraphic</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Therys Fm. Top</span>


<span class="c1"># ZONES/INTERVALS</span>

<span class="nt">Above</span><span class="p">:</span>
<span class="w">    </span><span class="nt">stratigraphic</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Above</span>

<span class="nt">Valysar</span><span class="p">:</span>
<span class="w">    </span><span class="nt">stratigraphic</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Valysar Fm.</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>fmu-dataio will do validation of this configuration, and report to you if there are
errors of any kind. Later, you will create a first script for exporting data, and you
might see validation errors then if you have made mistakes here.</p>
</div>
</section>
<section id="global-variables-yml-model">
<h2>global_variables.yml | <strong>model</strong><a class="headerlink" href="#global-variables-yml-model" title="Permalink to this heading">ÔÉÅ</a></h2>
<p>Now we insert the <code class="docutils literal notranslate"><span class="pre">model</span></code> entry in <code class="docutils literal notranslate"><span class="pre">global_variables.yml</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">model</span></code> block contains basic information about the model. According to the FMU standard,
all model setups should have a name and a revision. This is important information for
any usage of model results, and other systems such as REP will actively use this information
to render the data.</p>
<p>In the example below, you see how this is inserted. You also see that we have included
the three files we made above (<code class="docutils literal notranslate"><span class="pre">_masterdata.yml</span></code>, <code class="docutils literal notranslate"><span class="pre">_access.yml</span></code> and <code class="docutils literal notranslate"><span class="pre">_stratigraphy.yml</span></code>)</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">!include</span></code> statement simply inserts contents from another file into the main
yaml file. You could also put the contents directly into <code class="docutils literal notranslate"><span class="pre">global_variables.yml</span></code>, but
we encourage using <code class="docutils literal notranslate"><span class="pre">!include</span></code> to keep the main <code class="docutils literal notranslate"><span class="pre">global_variables.yml</span></code> somewhat tidy.</p>
</div>
<p>The global_variables.yml now looks like this:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">[</span><span class="nv">...</span><span class="p p-Indicator">]</span>

<span class="l l-Scalar l-Scalar-Plain">(rest of global_variables.yml)</span>

<span class="l l-Scalar l-Scalar-Plain">#===================================================================================</span>
<span class="l l-Scalar l-Scalar-Plain"># Elements pertaining to metadata</span>
<span class="l l-Scalar l-Scalar-Plain">#===================================================================================</span>

<span class="l l-Scalar l-Scalar-Plain">model</span><span class="p p-Indicator">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ff</span>
<span class="w">  </span><span class="nt">revision</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">22.1.0.dev</span>

<span class="nt">masterdata</span><span class="p">:</span><span class="w"> </span><span class="kt">!include</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">_masterdata.yml</span>
<span class="nt">access</span><span class="p">:</span><span class="w"> </span><span class="kt">!include</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">_access.yml</span>
<span class="nt">stratigraphy</span><span class="p">:</span><span class="w"> </span><span class="kt">!include</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">_stratigraphy.yml</span>
</pre></div>
</div>
<p><strong>You are done with the first part!</strong> We know this was boring and probably somewhat
confusing. The good news is that this is to a large degree a one-off thing, and you
should not expect to have to do this again and again. Perhaps never again!</p>
</section>
<section id="workflow-for-creating-case-metadata">
<h2>Workflow for creating case metadata<a class="headerlink" href="#workflow-for-creating-case-metadata" title="Permalink to this heading">ÔÉÅ</a></h2>
<p>It is time to create the ERT workflow which will generate case metadata. <strong>Case metadata</strong>
are metadata about the specific <em>case</em> you are running. A <em>case</em> in this context is a group
of one or more ensembles, which will appear in the same folder structure on /scratch.
Example: <code class="docutils literal notranslate"><span class="pre">/scratch/&lt;asset&gt;/&lt;user&gt;/&lt;CASE&gt;/...</span></code>.</p>
<p>For each FMU case, a set of metadata is generated and stored on
/scratch/&lt;case_directory&gt;/share/metadata/fmu_results.yml. The case metadata are read by
individual export jobs, and, if you opt to upload data into Sumo, the case metadata are
used to register the case. Case metadata are made by a hooked (pre-sim) ERT workflow
running <code class="docutils literal notranslate"><span class="pre">PRE_SIMULATION</span></code>.</p>
<p>To make this, first create the workflow file in <code class="docutils literal notranslate"><span class="pre">ert/bin/workflows/xhook_create_case_metadata</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The ‚Äúxhook‚Äù prefix is convention, but not mandatory. As all workflows will be included in the
ERT GUI dropdown, the ‚Äúhook‚Äù prefix signals that the workflow is not intended to be run manually. Further,
the ‚Äúx‚Äù makes it go to the bottom of the (alphabetically) sorted dropdown. If you have many workflows,
this makes things a little bit more tidy.</p>
</div>
<p>The workflow calls a pre-installed workflow job: <code class="docutils literal notranslate"><span class="pre">WF_CREATE_CASE_METADATA</span></code>. Example script
from the Drogon workflow:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>-- Create case metadata
--                       ert_caseroot                 ert_configpath    ert_casename   ert_username
WF_CREATE_CASE_METADATA  &lt;SCRATCH&gt;/&lt;USER&gt;/&lt;CASE_DIR&gt;  &lt;CONFIG_PATH&gt;     &lt;CASE_DIR&gt;     &lt;USER&gt;

-- This workflow is intended to be ran as a HOOK workflow.

-- Arguments:
-- ert_caseroot (Path): The absolute path to the root of the case on /scratch
-- ert_configpath (Path): The absolute path to the ERT config
-- ert_casename (str): The name of the case
-- ert_user (str): The username used in ERT

-- Optional arguments:
--  --sumo: If passed, case will be registered on Sumo. Use this is intention to upload data.
--  --sumo_env (str): Specify Sumo environment. Default: prod
--  --global_variables_path (str): Path to global variables relative to CONFIG path
--
-- NOTE! If using optional arguments, note that the &quot;--&quot; annotation will be interpreted
--       as comments by ERT if not wrapped in quotes. This is the syntax to use:
--       (existing arguments) &quot;--sumo&quot; &quot;--sumo_env&quot; dev
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note that there are references to Sumo in the script above. You don‚Äôt have to worry
about that for now.</p>
</div>
<p>Now, load this workflow in your ERT config file and make it a HOOK workflow:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">Hook</span> <span class="n">workflow</span> <span class="k">for</span> <span class="n">creating</span> <span class="n">case</span> <span class="n">metadata</span> <span class="ow">and</span> <span class="p">(</span><span class="n">optional</span><span class="p">)</span> <span class="n">registering</span> <span class="n">case</span> <span class="n">on</span> <span class="n">Sumo</span>
<span class="n">LOAD_WORKFLOW</span>   <span class="o">../../</span><span class="nb">bin</span><span class="o">/</span><span class="n">workflows</span><span class="o">/</span><span class="n">xhook_create_case_metadata</span>
<span class="n">HOOK_WORKFLOW</span>   <span class="n">xhook_create_case_metadata</span>  <span class="n">PRE_SIMULATION</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In the Drogon example, you will notice that the loading is done in the <code class="docutils literal notranslate"><span class="pre">install_custom_jobs.ert</span></code>
include file, while the HOOK_WORKFLOW call is in the main config file.</p>
</div>
<p>You can now start ERT to verify that the workflow is loading and working. You should see
the workflow appear in the workflows dropdown, and when you run a case, you should see
case metadata appear in <code class="docutils literal notranslate"><span class="pre">scratch/&lt;field&gt;/&lt;casedir&gt;/share/metadata/fmu_results.yml</span></code>.</p>
</section>
<section id="include-a-data-export-job">
<h2>Include a data export job<a class="headerlink" href="#include-a-data-export-job" title="Permalink to this heading">ÔÉÅ</a></h2>
<p>To verify that data export now works, add one job to your workflow. Pick something simple,
such as depth surfaces from the structural model or similar. Use one of the examples on
the next page to get going, and/or have a look at the Drogon tutorial project.</p>
<section id="what-about-sumo">
<h3>What about Sumo?<a class="headerlink" href="#what-about-sumo" title="Permalink to this heading">ÔÉÅ</a></h3>
<p>Odds are that you are implementing rich metadata export so that you can start utilizing
Sumo. Producing metadata with exported data is a pre-requisite for using Sumo. When you
have undertaken the steps above, you are good to go! Head to
<a class="reference external" href="https://fmu-sumo.app.radix.equinor.com/">Sumo</a> and click ‚Äúdocumentation‚Äù to
get going üëç</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="overview.html" class="btn btn-neutral float-left" title="Overview" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="examples.html" class="btn btn-neutral float-right" title="Examples" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Equinor 2024 (fmu-dataio release 0.1.dev1+g6ab1f02).</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>